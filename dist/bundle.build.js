!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).envTools=e()}(this,(function(){"use strict";function t(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
t=function(){return e};var e={},n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new k(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return S()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=b(a,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=u(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(t,n,a),i}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var d={};function f(){}function p(){}function h(){}var v={};s(v,i,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(T([])));g&&g!==n&&r.call(g,i)&&(v=g);var y=h.prototype=f.prototype=Object.create(v);function w(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function n(o,i,a,c){var s=u(t[o],t,i);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==typeof d&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(d).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(s.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function b(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return d;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,d;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function T(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,s(y,"constructor",h),s(h,"constructor",p),p.displayName=s(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,s(t,c,"GeneratorFunction")),t.prototype=Object.create(y),t},e.awrap=function(t){return{__await:t}},w(x.prototype),s(x.prototype,a,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new x(l(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(y),s(y,c,"Generator"),s(y,i,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=T,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),E(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function n(t,e,n,r,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,o)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c(t){throw new TypeError('"'+t+'" is read-only')}function s(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,c=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}(t,e)||l(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){if(t){if("string"==typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(t,e):void 0}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function d(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=l(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}function f(t,e){void 0===e&&(e={});var n=e.insertAt;if(t&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===n&&r.firstChild?r.insertBefore(o,r.firstChild):r.appendChild(o),o.styleSheet?o.styleSheet.cssText=t:o.appendChild(document.createTextNode(t))}}f(".jello-horizontal {\r\n  animation: tilt-in-left-1 .6s cubic-bezier(.25, .46, .45, .94) both\r\n}\r\n\r\n@keyframes tilt-in-left-1 {\r\n  0% {\r\n    transform: rotateX(-30deg) translateX(-300px) skewX(-30deg);\r\n    opacity: 0\r\n  }\r\n\r\n  100% {\r\n    transform: rotateX(0deg) translateX(0) skewX(0deg);\r\n    opacity: 1\r\n  }\r\n}\r\n\r\n.slide-in-blurred-top {\r\n  animation: slide-in-blurred-top .6s cubic-bezier(.23, 1.000, .32, 1.000) both\r\n}\r\n\r\n@keyframes slide-in-blurred-top {\r\n  0% {\r\n    transform: translateY(-1000px) scaleY(2.5) scaleX(.2);\r\n    transform-origin: 50% 0;\r\n    filter: blur(40px);\r\n    opacity: 0\r\n  }\r\n\r\n  100% {\r\n    transform: translateY(0) scaleY(1) scaleX(1);\r\n    transform-origin: 50% 50%;\r\n    filter: blur(0);\r\n    opacity: 1\r\n  }\r\n}\r\n\r\n.slide-in-right {\r\n  animation: slide-in-right .5s cubic-bezier(.25, .46, .45, .94) both\r\n}\r\n\r\n@keyframes slide-in-right {\r\n  0% {\r\n    transform: translateX(1000px);\r\n    opacity: 0\r\n  }\r\n\r\n  100% {\r\n    transform: translateX(0);\r\n    opacity: 1\r\n  }\r\n}");f(":root {\r\n  --primary-deep: #194769;\r\n  --primary-light: #194769;\r\n}\r\n\r\n#envBox {\r\n  position: fixed;\r\n  z-index: 999999999999;\r\n  top: 50%;\r\n  right: 0;\r\n  width: 10px;\r\n  height: 60px;\r\n  background: var(--primary-light);\r\n  transition: top .5s linear;\r\n  border-radius: 5px 0 0 5px;\r\n}\r\n\r\n#envBox-expand {\r\n  position: fixed;\r\n  z-index: 9999999999999;\r\n  height: 60px;\r\n  width: 100vw;\r\n  top: 50%;\r\n  right: 0;\r\n  background: var(--primary-light);\r\n  /* transition: width .5s linear; */\r\n}\r\n\r\n#envBox-expand button {\r\n  width: 20%;\r\n  height: 30px;\r\n  z-index: 1;\r\n  color: white;\r\n  background: var(--primary-deep);\r\n  outline: none;\r\n  border: none;\r\n  padding: 0.5em auto;\r\n  box-sizing: border-box;\r\n}\r\n\r\n#envBox-expand span {\r\n  color: #ffffff;\r\n  font-size: 14px;\r\n}\r\n\r\n\r\n.envBox-textline {\r\n  line-height: 20px;\r\n}");f("/* dialog componetnts */\r\n:root {\r\n  --main-moredeep: #194769;\r\n  --main-light: #26699c;\r\n  --main-deep: #194769;\r\n\r\n  --common-info: #194769;\r\n  --common-warn: #d2bc19;\r\n  --common-error: #F2855E;\r\n  --common-success: #6FEF8D;\r\n}\r\n\r\n#envBox-dialog {\r\n  position: fixed;\r\n  font-size: 14px;\r\n  max-width: 80%;\r\n  z-index: 99999999999999;\r\n  background: var(--main-deep);\r\n  padding: 20px;\r\n  border-radius: 5px;\r\n  box-sizing: border-box;\r\n  color: #fff;\r\n  box-shadow: 0px 10px 20px 0px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n#envBox-dialog button {\r\n  z-index: 1;\r\n  color: white;\r\n  background: var(--main-light);\r\n  outline: none;\r\n  border: none;\r\n  padding: 5px 10px;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.dialog-detail {\r\n  width: 100%;\r\n  line-height: 32px;\r\n  font-size: 14px;\r\n}\r\n\r\n.env-close {\r\n  position: absolute;\r\n  top: 0px;\r\n  right: 0px;\r\n  width: 20px;\r\n  height: 20px;\r\n  background: #fff;\r\n  border-radius: 0 0 0 50%;\r\n}\r\n\r\n/* toast componetnts */\r\n#envBox-toast {\r\n  position: fixed;\r\n  z-index: 99999999999999;\r\n  max-width: 80%;\r\n  word-break: break-all;\r\n  top: 2%;\r\n  z-index: 99;\r\n  padding: 15px;\r\n  border-radius: 30px;\r\n  font-size: 14px;\r\n  color: #fff;\r\n  box-shadow: 0px 10px 20px 0px rgba(0, 0, 0, 0.1)\r\n}\r\n\r\n.envBox-toast-info {\r\n  background: var(--common-info);\r\n}\r\n\r\n.envBox-toast-error {\r\n  background: var(--common-error);\r\n}\r\n\r\n.envBox-toast-warn {\r\n  background: var(--common-warn);\r\n}\r\n\r\n.envBox-error {\r\n  border-radius: 5px;\r\n  max-height: 400px;\r\n  color: var(--common-error);\r\n  word-break: break-all;\r\n  overflow-y: auto;\r\n}\r\n\r\n.console,\r\n.http,\r\n.router {\r\n  width: 100%;\r\n  display: flex;\r\n  word-break: break-all;\r\n  display: inline-block;\r\n  border-radius: 5px;\r\n\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n}\r\n\r\n.router {\r\n  color: #fff;\r\n}\r\n\r\n.console-log {}\r\n\r\n.console-warn {\r\n  color: var(--common-warn);\r\n}\r\n\r\n.console-error {\r\n  color: var(--common-error);\r\n}\r\n\r\n.console-info {\r\n  color: var(--main-light);\r\n}\r\n\r\n\r\n\r\n.http-start {\r\n  color: var(--common-info);\r\n}\r\n\r\n.http-suc {\r\n  color: var(--common-success);\r\n}\r\n\r\n.http-err {\r\n  color: var(--common-error);\r\n}\r\n\r\n.xn {\r\n  color: #fff;\r\n  border-radius: 5px;\r\n}\r\n\r\n.xn-quick {\r\n  color: var(--common-success);\r\n}\r\n\r\n.xn-mid {\r\n  color: var(--common-warn);\r\n}\r\n\r\n.xn-low {\r\n  color: var(--common-error);\r\n}\r\n\r\n.storage-box {\r\n  border-radius: 2px;\r\n  word-break: break-all;\r\n  width: 100%;\r\n  display: flex;\r\n  word-break: break-all;\r\n  display: inline-block;\r\n  border-radius: 5px;\r\n}\r\n\r\n.storage-key {\r\n  color: #fff;\r\n}\r\n\r\n.toolbar-warp {\r\n  position: fixed;\r\n  left: 0;\r\n  top: -20px;\r\n}\r\n\r\n.toolbar-clip,\r\n.toolbar-bin,\r\n.toolbar-filter {\r\n  width: 20px;\r\n  height: 20px;\r\n}\r\n\r\n.toolbar-cookie {\r\n  color: var(--main-deep) !important;\r\n  position: relative;\r\n  bottom: 5px;\r\n}\r\n\r\n.toolbar-session {\r\n  color: var(--main-deep) !important;\r\n  position: relative;\r\n  bottom: 5px;\r\n  margin-left: 5px;\r\n}");f("html,\r\nbody {\r\n  width: 100%;\r\n  height: 100%;\r\n  padding: 0;\r\n  font-size: 16px;\r\n  margin: 0;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;\r\n}\r\n\r\n.envBox-inlineText {\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n}");var p=function(t){try{return JSON.parse(localStorage.getItem(t))}catch(t){console.log(t)}},h=function(t,e){localStorage.setItem(t,JSON.stringify(e))},v=function(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()},m=function(t){return document.querySelector(t)},g=function(t){var n=new WeakSet;return JSON.stringify(t,(function(t,r){if("object"===e(r)&&null!==r){if(n.has(r))return;n.add(r)}return r}))},y=function(){var t=new Date;return"".concat(t.getFullYear(),"年").concat(t.getMonth()+1,"月").concat(t.getDate(),"日").concat(t.getHours(),"时").concat(t.getMinutes(),"分").concat(t.getSeconds(),"秒")},w={info:"envBox-toast-info",error:"envBox-toast-error",warn:"envBox-toast-warn"},x=function(t,e,n,r){m("#envBox-toast")&&document.body.removeChild(m("#envBox-toast"));var o=document.createElement("div");o.id="envBox-toast",o.className="slide-in-blurred-top ".concat(w[n]),"textDialog"===r&&(o.style.borderRadius="5px",o.style.borderRadius="5px"),o.innerHTML=t,document.body.appendChild(o),setTimeout((function(){m("#envBox-toast")&&document.body.removeChild(o)}),e)},b=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3;x(t,e,"info","textDialog")},L=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3;x(t,e,"info")},E=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3;x(t,e,"error")},k=i((function t(e,n){r(this,t);var o=new Map;e.addEventListener("touchstart",(function(t){var e,r=d(t.changedTouches);try{for(r.s();!(e=r.n()).done;){var i=e.value,a=Object.create(null);o.set(i.identifier,a),n.start(i,a)}}catch(t){r.e(t)}finally{r.f()}})),e.addEventListener("touchmove",(function(t){var e,r=d(t.changedTouches);try{for(r.s();!(e=r.n()).done;){var i=e.value,a=o.get(i.identifier);n.move(i,a)}}catch(t){r.e(t)}finally{r.f()}})),e.addEventListener("touchend",(function(t){var e,r=d(t.changedTouches);try{for(r.s();!(e=r.n()).done;){var i=e.value,a=o.get(i.identifier);n.end(i,a),o.delete(i.identifier)}}catch(t){r.e(t)}finally{r.f()}})),e.addEventListener("cancel",(function(t){var e,r=d(t.changedTouches);try{for(r.s();!(e=r.n()).done;){var i=e.value,a=o.get(i.identifier);n.cancel(i,a),o.delete(i.identifier)}}catch(t){r.e(t)}finally{r.f()}}))})),T=function(){function t(e){r(this,t),this.dispatcher=e}return i(t,[{key:"start",value:function(t,e){var n=this;e.startX=t.clientX,e.startY=t.clientY,e.isPan=!1,e.isTap=!0,e.isPress=!1,e.handler=setTimeout((function(){e.isPan=!1,e.isTap=!1,e.isPress=!0,n.dispatcher.dispatch("press",{clientX:t.clientX,clientY:t.clientY}),e.handler=null}),500)}},{key:"move",value:function(t,e){var n=t.clientX-e.startX,r=t.clientY-e.startY,o=Math.pow(n,2)+Math.pow(r,2);!e.isPan&&o>100&&(e.isPan=!0,e.isTap=!1,e.isPress=!1,e.isVertical=Math.abs(n)<Math.abs(r),this.dispatcher.dispatch("panstart",{startX:e.startX,startY:e.startY,clientX:t.clientX,clientY:t.clientY,dx:n,dy:r,isVertical:e.isVertical}),clearTimeout(e.handler)),e.isPan&&this.dispatcher.dispatch("pan",{startX:e.startX,startY:e.startY,clientX:t.clientX,clientY:t.clientY,dx:n,dy:r,isVertical:e.isVertical}),e.points?e.points=e.points.filter((function(t){return Date.now()-t.t<500})):e.points=[],e.points.push({t:Date.now(),x:t.clientX,y:t.clientY})}},{key:"end",value:function(t,e){(e.isFlick=!1,e.isTap&&(this.dispatcher.dispatch("tap",{}),clearTimeout(e.handler)),e.isPan)&&(e.points=e.points.filter((function(t){return Date.now()-t.t<500})),(e.points.length?Math.sqrt(Math.pow(t.clientX-e.points[0].x,2)+Math.pow(t.clientY-e.points[0].y,2))/(Date.now()-e.points[0].t):0)>1.5?(e.isFlick=!0,this.dispatcher.dispatch("flick",{})):(e.isFlick=!1,this.dispatcher.dispatch("panend",{clientX:t.clientX,clientY:t.clientY})));e.isPress&&this.dispatcher.dispatch("panend",{startX:e.startX,startY:e.startY,clientX:t.clientX,clientY:t.clientY,isVertical:e.isVertical,isFlick:e.isFlick})}},{key:"cancel",value:function(t,e){clearTimeout(e.handler)}}]),t}(),S=function(){function t(e){r(this,t),this.element=e}return i(t,[{key:"dispatch",value:function(t,e){var n=new Event(t);for(var r in e)n[r]=e[r];this.element.dispatchEvent(n)}}]),t}();function N(t){new k(t=document.documentElement,new T(new S(t)))}function C(t,e){N(t),e?Ft.startdevTools(e):Ft.startdevTools();var n=document.getElementById("envBox");n.style.display="none";var r=0,o=0,i=0,a=0,c=!1,s=0,l=!1,u=!1,d=!1,f=null;e.endTime&&setTimeout((function(){f&&(clearInterval(f),f=null)}),e.endTime),document&&document.documentElement&&document.documentElement.addEventListener("pan",(function(t){r=t.dx,o=t.dy,i=t.startX,a=t.clientX,f||(f=setInterval((function(){r>200&&!c&&(c=!0,s=o),c&&!l&&Math.abs(a-i)<20&&o-s>100&&(l=!0,u=r),c&&l&&!d&&r-u>100&&(L("success unlock"),d=!0,n.style.display="block",clearInterval(f),f=null)}),50))}))}var O='<svg class=\'env-close\' role="img" xmlns="http://www.w3.org/2000/svg" width="48px" height="48px" viewBox="0 0 24 24" aria-labelledby="closeIconTitle" stroke="#194769" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="miter" fill="none" color="#194769"> <title id="closeIconTitle">Close</title> <path d="M6.34314575 6.34314575L17.6568542 17.6568542M6.34314575 17.6568542L17.6568542 6.34314575"/> </svg>';let B=0;const I=(t,e,n)=>{let r=m(".toolbar-clip"),o=m(".toolbar-bin"),i=m(".toolbar-filter");o.onclick=()=>{t.removeChild(m(`.envBox-${e}`)),t.style.width=B+"px",zt(e),L("清理成功")},r.onclick=()=>{let t=m(`.envBox-${e}`);if(!t)return void L("无数据可复制");let n=M(t);navigator.clipboard&&(navigator.clipboard.writeText(n),L("复制成功"))},i.onclick=()=>{if("storage"===e){let t=prompt("输入查询的KEY: "),e="";["localStorageList","sessionStorageList"].forEach((r=>{n[r].findIndex((n=>{n[0]===t&&(e=n)}))})),e&&"array"===v(e)?L(`key: ${e[0]} val: ${e[1]} type: ${v(e)}`):L("不存在")}else L("该模块暂不支持过滤")}},M=function(t){let e=t.innerHTML;if(e=e.replace(/<\/?.+?\/?>/g,""),e=e.replace(/\s+/g,""),""!=e)return e},j=(t,e)=>{let n=document.createElement("span");n.className="toolbar-session",n.innerText="session",t.appendChild(n),n.onclick=()=>{let t="";e.sessionStorageList.forEach(((e,n)=>{let r=e[0],o=JSON.parse(g(e[1])),i=v(o);t+=`<div><span class='storage-key'>key： </span><span >${r}</span> <span class='storage-key'>val：</span><span >${o}</span> <span class='storage-key'>type：</span><span >${i}</span> <br></div>`})),b(t)}},_=t=>{let e=document.createElement("span");e.className="toolbar-cookie",e.innerText="cookie",t.appendChild(e),e.onclick=()=>{H()}},H=function(){let t=document.cookie.split("; "),e="cookie：<br>";for(let n=0;n<t.length;n++){let r=t[n].split("=");e+=`${r[0]}-${r[1]}<br>`}b(e)};let X,P,Y=!1;const R=(t,e,n)=>{h("global_forbid",!0);let r=document.querySelector("#envBox-dialog");r||(r=document.createElement("div"),r.id="envBox-dialog",r.className="jello-horizontal",document.body.appendChild(r)),r.style.display="block",r.innerHTML&&(r.innerHTML=""),r.innerHTML=t,r.innerHTML+=O,A(r,e,n),U(r),q(),document.querySelector(".env-close").addEventListener("click",(()=>{D()}),!1)},A=(t,e,n)=>{"error"!==e&&"http"!==e&&"log"!==e&&"storage"!==e||((t,e,n)=>{B=t.offsetWidth;let r=document.createElement("div");r.className="toolbar-warp",r.innerHTML+='<svg class=\'toolbar-clip\' role="img" xmlns="http://www.w3.org/2000/svg" width="48px" height="48px" viewBox="0 0 24 24" aria-labelledby="clipboardIconTitle" stroke="#194769" stroke-width="2" stroke-linecap="round" stroke-linejoin="miter" fill="none" color="#194769"> <title id="clipboardIconTitle">Clipboard</title> <polyline points="15 3 19 3 19 21 5 21 5 3 5 3 9 3"/> <path d="M14,4 L10,4 C9.44771525,4 9,3.55228475 9,3 C9,2.44771525 9.44771525,2 10,2 L14,2 C14.5522847,2 15,2.44771525 15,3 C15,3.55228475 14.5522847,4 14,4 Z"/> </svg>',r.innerHTML+='<svg class=\'toolbar-bin\' role="img" xmlns="http://www.w3.org/2000/svg" width="48px" height="48px" viewBox="0 0 24 24" aria-labelledby="binIconTitle" stroke="#194769" stroke-width="2" stroke-linecap="round" stroke-linejoin="miter" fill="none" color="#194769"> <title id="binIconTitle">Bin</title> <path d="M19 6L5 6M14 5L10 5M6 10L6 20C6 20.6666667 6.33333333 21 7 21 7.66666667 21 11 21 17 21 17.6666667 21 18 20.6666667 18 20 18 19.3333333 18 16 18 10"/> </svg>',"storage"===e&&(r.innerHTML+='<svg class=\'toolbar-filter\' role="img" xmlns="http://www.w3.org/2000/svg" width="48px" height="48px" viewBox="0 0 24 24" aria-labelledby="filterIconTitle" stroke="#194769" stroke-width="2" stroke-linecap="round" stroke-linejoin="miter" fill="none" color="#194769"> <title id="filterIconTitle">Filter</title> <path d="M10 12.261L4.028 3.972h16L14 12.329V17l-4 3z"/> </svg>',_(r),j(r,n)),setTimeout((()=>{t.appendChild(r),I(t,e,n)}),0)})(t,e,n)},D=()=>{let t=document.querySelector("#envBox-dialog");t.innerHTML="",t.style.display="none",h("global_forbid",!1)},z=(t,e,n)=>{if(!m(".envBox-error"))return;let r=document.querySelector("#envBox-dialog");r&&(r.innerHTML&&(r.innerHTML=""),r.innerHTML+=t,r.innerHTML+=O,A(r,e,n),document.querySelector(".env-close").addEventListener("click",(()=>{D()}),!1))},q=()=>{document.documentElement.addEventListener("panstart",(t=>{const e=m("#envBox-dialog");X=t.clientX-e.offsetLeft,P=t.clientY-e.offsetTop,V(e,t.startX,t.startY)&&(Y=!0)}),!1),document.documentElement.addEventListener("pan",(t=>{const e=m("#envBox-dialog");F(e,t)}),!1),document.documentElement.addEventListener("panend",(t=>{const e=m("#envBox-dialog");F(e,t),Y=!1}),!1)},F=(t,e)=>{Y&&(t.style.left=e.clientX-X+"px",t.style.top=e.clientY-P+"px")},U=t=>{t.style.left=window.innerWidth/2-t.offsetWidth/2+"px",t.style.top=window.innerHeight/2-t.offsetHeight/2+"px"},V=(t,e,n)=>{let r=t.offsetLeft,o=t.offsetLeft+t.offsetWidth,i=t.offsetTop,a=t.offsetTop+t.offsetHeight;return r<e&&e<o&&i<n&&n<a};var W=["load","loadend","timeout","error","readystatechange","abort"];function G(t,e){var n={};for(var r in t)n[r]=t[r];return n.target=n.currentTarget=e,n}var $=W[0],J=W[1],K=W[2],Z=W[3],Q=W[4],tt=W[5];function et(t,e){if((e=e||window).__xhr)throw"Ajax is already hooked.";return function(t,e){var n=t.onRequest,r=t.onResponse,o=t.onError;function i(t,e){var n=new ct(t),o={response:e.response||e.responseText,status:e.status,statusText:e.statusText,config:t.config,headers:t.resHeader||t.getAllResponseHeaders().split("\r\n").reduce((function(t,e){if(""===e)return t;var n=e.split(":");return t[n.shift()]=function(t){return t.replace(/^\s+|\s+$/g,"")}(n.join(":")),t}),{})};if(!r)return n.resolve(o);r(o,n)}function a(t,e,n,r){var i=new st(t);n={config:t.config,error:n,type:r},o?o(n,i):i.next(n)}function c(){return!0}function s(t){return function(e,n){return a(e,this,n,t),!0}}function l(t,e){return 4===t.readyState&&0!==t.status?i(t,e):4!==t.readyState&&rt(t,Q),!0}return function(t,e){function n(e){return function(){var n=this.hasOwnProperty(e+"_")?this[e+"_"]:this.xhr[e],r=(t[e]||{}).getter;return r&&r(n,this)||n}}function r(e){return function(n){var r=this.xhr,o=this,i=t[e];if("on"===e.substring(0,2))o[e+"_"]=n,r[e]=function(i){i=G(i,o),t[e]&&t[e].call(o,r,i)||n.call(o,i)};else{var a=(i||{}).setter;n=a&&a(n,o)||n,this[e+"_"]=n;try{r[e]=n}catch(t){}}}}function o(e){return function(){var n=[].slice.call(arguments);if(t[e]){var r=t[e].call(this,n,this.xhr);if(r)return r}return this.xhr[e].apply(this.xhr,n)}}return(e=e||window).__xhr=e.__xhr||e.XMLHttpRequest,e.XMLHttpRequest=function(){for(var t=new e.__xhr,i=0;i<W.length;++i){var a="on"+W[i];void 0===t[a]&&(t[a]=null)}for(var c in t){var s="";try{s=typeof t[c]}catch(t){}"function"===s?this[c]=o(c):Object.defineProperty(this,c,{get:n(c),set:r(c),enumerable:!0})}var l=this;t.getProxy=function(){return l},this.xhr=t},Object.assign(e.XMLHttpRequest,{UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4}),e.__xhr}({onload:c,onloadend:c,onerror:s(Z),ontimeout:s(K),onabort:s(tt),onreadystatechange:function(t){return l(t,this)},open:function(t,e){var r=this,o=e.config={headers:{}};o.method=t[0],o.url=t[1],o.async=t[2],o.user=t[3],o.password=t[4],o.xhr=e;var i="on"+Q;if(e[i]||(e[i]=function(){return l(e,r)}),n)return!0},send:function(t,e){var r=e.config;if(r.withCredentials=e.withCredentials,r.body=t[0],n){var o=function(){n(r,new at(e))};return!1===r.async?o():setTimeout(o),!0}},setRequestHeader:function(t,e){if(e.config.headers[t[0].toLowerCase()]=t[1],n)return!0},addEventListener:function(t,e){var n=this;if(-1!==W.indexOf(t[0])){var r=t[1];return nt(e).addEventListener(t[0],(function(e){var o=G(e,n);o.type=t[0],o.isTrusted=!0,r.call(n,o)})),!0}},getAllResponseHeaders:function(t,e){var n=e.resHeader;if(n){var r="";for(var o in n)r+=o+": "+n[o]+"\r\n";return r}},getResponseHeader:function(t,e){var n=e.resHeader;if(n)return n[(t[0]||"").toLowerCase()]}},e)}(t,e)}function nt(t){return t.watcher||(t.watcher=document.createElement("a"))}function rt(t,e){var n,r=t.getProxy(),o="on"+e+"_",i=G({type:e},r);r[o]&&r[o](i),"function"==typeof Event?n=new Event(e,{bubbles:!1}):(n=document.createEvent("Event")).initEvent(e,!1,!0),nt(t).dispatchEvent(n)}function ot(t){this.xhr=t,this.xhrProxy=t.getProxy()}function it(t){function e(t){ot.call(this,t)}return e.prototype=Object.create(ot.prototype),e.prototype.next=t,e}ot.prototype=Object.create({resolve:function(t){var e=this.xhrProxy,n=this.xhr;e.readyState=4,n.resHeader=t.headers,e.response=e.responseText=t.response,e.statusText=t.statusText,e.status=t.status,rt(n,Q),rt(n,$),rt(n,J)},reject:function(t){this.xhrProxy.status=0,rt(this.xhr,t.type),rt(this.xhr,J)}});var at=it((function(t){var e=this.xhr;for(var n in t=t||e.config,e.withCredentials=t.withCredentials,e.open(t.method,t.url,!1!==t.async,t.user,t.password),t.headers)e.setRequestHeader(n,t.headers[n]);e.send(t.body)})),ct=it((function(t){this.resolve(t)})),st=it((function(t){this.reject(t)}));var lt=document.body,ut=!1,dt={insertDOM:lt,wait:1e3,needSleep:!1,envBoxIdName:"envBox",envBoxExpandIdName:"envBox-expand",envList:["test","dev","prebrand"],watchEnv:!0,watchPerformance:!0,watchError:!0,watchRoutes:!0,watchActions:!0,watchStorage:!0,watchSystem:!0,watchConsole:!0,watchHttp:!0,isNewStorage:!0,watchActionDOMList:[{eventType:"click",domId:".test1",eventId:"001"}],sendOptions:{commonInfo:{pid:"",mid:"",uid:"",did:""},method:"gif",baseURL:"http://localhost:8000"},version:"1.0.0",maxLimit:5,asyncTime:5e3,endTime:1e4},ft={errorCount:0,errorSum:"",errorList:[]},pt={FP:[30,100],DCL:[500,1200],L:[600,2e3]},ht={routeInfo:{newURL:"",oldURL:"",title:"",routeType:"",refreshNums:p("global_refreshNums")||0,changeTime:""},routesList:[]},vt={localStorageList:[],maxLen:5,sessionStorageList:[]},mt={},gt={consoleList:[],info:[],error:[],log:[],warn:[]},yt={httpList:[],urlList:[]},wt=function(){h("global_forbid",!1)},xt=function(t){var e=t.envBoxIdName,n=t.envBoxExpandIdName,r=t.insertDOM,o=t.watchHttp,i=t.watchSystem,a=t.watchEnv,c=t.watchPerformance,s=t.watchError,l=t.watchRoutes,u=t.watchStorage,d=t.watchConsole,f=document.createElement("div");f.id=e,r.appendChild(f),Lt(f),f.addEventListener("click",(function(t){!0!==p("global_forbid")&&(ut=!0,f.id=n,f.className="slide-in-right",a&&Mt(f),c&&jt(f),s&&_t(f),l&&Ht(f),u&&Xt(f),i&&Pt(f),d&&Yt(f),o&&Rt(f),At(f),Dt(f),bt(f),document.querySelectorAll("#envBox-expand button").forEach((function(t){t.ontouchstart=function(){t.style.background="#26699c"},t.ontouchend=function(){t.style.background="#194769"}})))}),!1),document.addEventListener("click",(function(t){t.target.id!==f.id&&ut&&(f.id=e,f.innerHTML="",ut=!1,f.className="")}),!1)},bt=function(t){["watchEnv","watchPerformance","watchError","watchRoutes","watchStorage","watchSystem","watchConsole","watchHttp"].forEach((function(e){if(!dt[e]){console.log("asdasdasdasdasd");var n=document.createElement("button");t.appendChild(n),n.innerText="...."}}))},Lt=function(t){N();var e=t.offsetWidth,n=t.offsetHeight,r=t.offsetLeft,o=t.offsetTop,i=!1;document.documentElement.addEventListener("panstart",(function(t){i=r-10<t.clientX&&t.clientX<r+e+10&&o-10<t.clientY&&t.clientY<o+n+10})),document.documentElement.addEventListener("panend",(function(e){i&&(t.style.top=e.clientY+"px",o=e.clientY)}))},Et=function(t){for(var e in t){null==t[e]&&E("options exist null or undefined----"+e)}},kt=function(){window.addEventListener("error",(function(t){It("global error"+t.message),z("<div class='envBox-error'>".concat(ft.errorSum,"</div>"),"error")}),!1),window.addEventListener("unhandledrejection",(function(t){It("promise error"+t.reason),z("<div class='envBox-error'>".concat(ft.errorSum,"</div>"),"error")}),!1)},Tt=function(){dt.watchActionDOMList.forEach((function(t){var e=t.domId&&document.querySelectorAll(t.domId);e&&e.forEach((function(e){e.addEventListener(t.eventType,(function(){qt({type:t.eventType,DOM:t.domId},"action")}))}))}))},St=function(){var t=ht.routeInfo;t.newURL=window.location.href,t.oldURL=window.location.href,t.title=document.title,t.routeType=window.location.href.includes("/#/")?"hash":"history",t.changeTime=y(),window.onload=function(){t.refreshNums+=1,h("global_refreshNums",t.refreshNums)},window.addEventListener("popstate",(function(e){t.changeTime=y(),"history"===t.routeType&&L("back："+window.location.href)})),window.addEventListener("hashchange",(function(e){t.newURL=e.newURL,t.oldURL=e.oldURL,t.routeType="hash",t.changeTime=y(),t.routesList.push(e.newURL),L("back："+e.newURL)})),window.addHistoryListener("history",(function(){t.newURL=window.location.href,t.routeType="history",t.changeTime=y(),L("enter："+window.location.href)}))},Nt=function(){function t(t,e){var n=e.setItem;e.setItem=function(e,r){r=JSON.parse(g(r));var o=new Event("setItem",{key:r});o.key=e,o.val=r;var i=vt[t].findIndex((function(t){return t[0]===e}));i>-1?(vt[t].splice(i,1),vt[t].unshift([e,r])):vt[t].push([e,r]),window.dispatchEvent(o),n.apply(this,arguments)}}t("localStorageList",localStorage),t("sessionStorageList",sessionStorage)},Ct=function(){var e,r=(e=t().mark((function e(){var n;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=function(){plus.geolocation.getCurrentPosition((function(t){mt.latitude=t.coords.latitude,mt.longitude=t.coords.longitude,mt.altitude=t.coords.altitude,mt.accuracy=t.coords.accuracy,mt.country=t.address.country,mt.city=t.address.city,mt.district=t.address.district,mt.street=t.address.street,mt.streetNum=t.address.streetNum,mt.poiName=t.address.poiName,mt.postalCode=t.address.postalCode,mt.cityCode=t.address.cityCode,mt.addresses=t.addresses}),(function(t){alert("Geolocation error: "+t.message)})),plus.device.getInfo({success:function(t){var e;a(e={IMEI:t.imei,IMSI:t.imsi,uuid:t.uuid,Model:plus.device.model,vendor:plus.device.vendor,dpiX:plus.screen.dpiX,dpiY:plus.screen.dpiY,height:plus.screen.height,width:plus.screen.width,resolutionHeight:plus.screen.resolutionHeight,resolutionWidth:plus.screen.resolutionWidth,scale:plus.screen.scale,CONNECTION_NONE:plus.networkinfo.CONNECTION_NONE,CONNECTION_ETHERNET:plus.networkinfo.CONNECTION_ETHERNET,CONNECTION_WIFI:plus.networkinfo.CONNECTION_WIFI,language:plus.os.language,name:plus.os.name},"vendor",plus.os.vendor),a(e,"version",plus.os.version),a(e,"language",plus.os.language),c("systemData")}})};try{returnCitySN&&(mt.IP=returnCitySN.cip,mt["地区代码"]=returnCitySN.cid,mt["城市"]=returnCitySN.cname)}catch(t){p("global_refreshNums")||E("SDK请求失败")}window.plus||(mt.userAgent=navigator.userAgent,mt.appName=navigator.appName,mt.appCodeName=navigator.appCodeName,mt.appVersion=navigator.appVersion,mt.appMinorVersion=navigator.appMinorVersion,mt.platform=navigator.platform,mt.language=navigator.language,mt.width=window.screen.width,mt.height=window.screen.height,mt.pixelDepth=window.screen.pixelDepth),window.plus?n():document.addEventListener("plusready",n,!1);case 4:case"end":return t.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(o,i){var a=e.apply(t,r);function c(t){n(a,o,i,c,s,"next",t)}function s(t){n(a,o,i,c,s,"throw",t)}c(void 0)}))});return function(){return r.apply(this,arguments)}}(),Ot=function(){["info","error","log","warn"].forEach((function(t){!function(t){var e=console[t];console[t]=function(){gt.consoleList.push({data:arguments[0],type:t}),e.call.apply(e,[console].concat(Array.prototype.slice.call(arguments)))}}(t)}))},Bt=function(){et({onRequest:function(t,e){console.log("preWatchHttp----start",t);var n={method:t.method,headers:t["content-type"],url:t.url,body:t.body||""};yt.httpList.push(n),yt.urlList.push({url:t.url,type:"send"}),e.next(t)},onError:function(t,e){console.log("preWatch----error",t);var n={method:t.config.method,headers:t.config["content-type"],url:t.config.url};yt.httpList.push(n),yt.urlList.push({url:t.config.url,type:"err"}),e.next(t)},onResponse:function(t,e){console.log("preWatch----success",t);var n={method:t.config.method,headers:t.headers["content-type"],url:t.config.url,status:t.status,response:t.response};yt.httpList.push(n),yt.urlList.push({url:t.config.url,type:"suc"}),e.next(t)}})},It=function(t){var e=ft.errorList,n=dt.asyncTime;if(t&&(e.push(t),ft.errorCount+=1,"array"===v(e))){ft.errorSum+="".concat(ft.errorCount,": ")+t+"<br>";var r={errorSum:ft.errorSum};if(ft.errorCount>=dt.maxLimit)qt(r,"err"),ft.errorList=[];else{if(!ft.errorList.length)return;setTimeout((function(){ft.errorCount<dt.maxLimit&&(qt(r,"err"),ft.errorList=[])}),n)}}},Mt=function(t){var e=dt.envList,n=document.createElement("button");n.innerText=p("global_env")||"env",n.className="envBtn",t.appendChild(n),n.addEventListener("click",(function(){var t="<div class='dialog-detail'>当前环境: ".concat(p("global_env")||"env","</div>");e.forEach((function(e){t+="<button class='env-btn'>".concat(e,"</button>")})),R(t,"env"),document.querySelectorAll(".env-btn").forEach((function(t){t.addEventListener("click",(function(e){ut=!1;var r=e.target.textContent;h("global_env",r),t.innerText=r,n.innerText=p("global_env")||"env",h("global_url","https://".concat(r,".zzss.com")),L("已成功修改"+r+"环境")}),!1)}))}),!1)},jt=function(t){var e=document.createElement("button");t.appendChild(e),e.innerText="performance";var n,r,o,i=window.performance.timing,a=i.domLoading,c=i.navigationStart;n=a-c,r=i.domContentLoadedEventEnd-c,o=i.loadEventEnd-c;var s=1024*navigator.connection.downlink/8,l=navigator.connection.effectiveType;function u(t,e){var n=pt[t];return e<n[0]?"xn-quick xn":e>n[1]?"xn-low xn":"xn-mid xn"}console.log(navigator.connection);var d="<div>首屏渲染：<span class=".concat(u("FP",n),">").concat(n,"ms</span></div><br><div>DOM加载完毕： <span class=").concat(u("DCL",r),">").concat(r,"ms</span></div><br><div>图片、样式等外链资源加载完成：<span class=").concat(u("L",o),">").concat(o,"ms</span></div><br><div>网速：<span>").concat(s,"kb/s</span></div><br><div>网络类型：<span>").concat(l,"</span></div>");e.onclick=function(){R(d,"performance")}},_t=function(t){var e=ft.errorSum,n=document.createElement("button");t.appendChild(n),n.innerText="error",n.onclick=function(){e?R("<div class='envBox-error'>".concat(e,"</div>"),"error"):L("no error")}},Ht=function(t){var e=ht.routeInfo,n=document.createElement("button");t.appendChild(n),n.innerText="route",n.onclick=function(){for(var t="",n=0,r=Object.entries(e);n<r.length;n++){var o=s(r[n],2),i=o[0],a=o[1];t+="<div class='envBox-textline router'>".concat(i+"："+a,"</div>")}t+="<div class='envBox-inlineText envBox-textline router-log router'>routesList: ".concat(ht.routesList,"</div>"),R(t,"route"),m(".router-log").onclick=function(){b(JSON.stringify(ht.routesList))}}},Xt=function(t){var e=dt.isNewStorage,n=vt.maxLen;vt.localStorageList;var r=document.createElement("button");t.appendChild(r),r.innerText="storage",r.onclick=function(){var t,r="",o=[],i=null===(t=vt.localStorageList)||void 0===t?void 0:t.length;(e&&n<i&&vt.localStorageList.splice(n,i),vt.localStorageList.length)?(vt.localStorageList.forEach((function(t,e){var n=t[0],i=JSON.parse(g(t[1])),a=v(i),c="<div class='envBox-inlineText storage-box'><span class='storage-key'>key： </span><span >".concat(n,"</span> <span class='storage-key'>val：</span><span >").concat(i,"</span> <span class='storage-key'>type：</span><span >").concat(a,"</span> <br></div>");r+=c;var s=c.replace("envBox-inlineText","");o.push(s)})),R("<div class='envBox-storage'>".concat(r,"</div>"),"storage",vt),r="",document.querySelectorAll(".storage-box").forEach((function(t,e){t.addEventListener("click",(function(){b(o[e],5e3)}),!1)}))):L("no storage")}},Pt=function(t){var e=document.createElement("button");t.appendChild(e),e.innerText="system",e.onclick=function(){if(window.plus||L("在真机webview中可以获取更多设备数据"),"{}"!==JSON.stringify(mt)){for(var t="",e=0,n=Object.entries(mt);e<n.length;e++){var r=s(n[e],2),o=r[0],i=r[1];t+="<div>".concat(o,": ").concat(i,"</div>")}R(t,"system")}else E("设备数据获取异常")}},Yt=function(t){var n=document.createElement("button");t.appendChild(n),n.innerText="log",n.onclick=function(){var t="";gt.consoleList.length?(gt.consoleList.forEach((function(n){var r=n.data,o=n.type;if("object"===e(r)){var i=g(r);t+="<div class='console console-".concat(o,"'>").concat(i,"</div>")}else t+="<div class='console console-".concat(o,"'>").concat(r,"</div>")})),R("<div class='envBox-log'>".concat(t,"</div>"),"log"),document.querySelectorAll(".console").forEach((function(t,n){t.addEventListener("click",(function(){var t=gt.consoleList[n].data,r="object"===e(t)?g(t):t;b(r,5e3)}),!1)}))):L("no log")}},Rt=function(t){var e=document.createElement("button");t.appendChild(e),e.innerText="http",e.onclick=function(){var t="";yt.urlList.length?(yt.urlList.forEach((function(e,n){t+="<div class='http http-".concat(e.type,"'>").concat(e.url,"</div>")})),R("<div class='envBox-http'>".concat(t,"</div>"),"http"),document.querySelectorAll(".http").forEach((function(t,e){t.addEventListener("click",(function(){for(var t="",n=0,r=Object.entries(yt.httpList[e]);n<r.length;n++){var o=s(r[n],2),i=o[0],a=o[1];t+="<div>".concat(i,": ").concat(a,"</div> ")}b(t,5e3)}),!1)}))):L("no http data")}},At=function(t){var e=document.createElement("button");t.appendChild(e),e.innerText="version",e.onclick=function(){L("当前版本".concat(dt.version))}},Dt=function(t){var e=document.createElement("button");t.appendChild(e),e.innerText="clear",e.onclick=function(){zt("error"),zt("storage"),zt("log"),zt("http"),ht.routesList=[],ht.routeInfo.refreshNums=0,L("cache cleared successfully")}},zt=function(t){switch(t){case"error":ft.errorList=[],ft.errorSum="";break;case"http":yt.urlList=[];break;case"storage":vt.localStorageList=[];break;case"log":gt.consoleList=[]}},qt=function(t,e,n){"object"===v(t)||e||E("do not input object or type");var r=dt.sendOptions,o=r.baseURL,i=r.commonInfo,a=r.method,c=Object.assign({},t,i),l=Object.entries(c).map((function(t){var e=s(t,2),n=e[0],r=e[1];return"".concat(n,"=").concat(r)})).join("&");"gif"!==n&&"gif"!==a||((new Image).src="".concat(o,"?")+encodeURIComponent(l));"beacon"!==n&&"beacon"!==a||navigator.sendBeacon(o,c)},Ft={startdevTools:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dt;wt(),Object.assign(dt,t),Et(dt),dt.watchError&&kt(),dt.watchActions&&Tt(),dt.watchRoutes&&St(),dt.watchStorage&&Nt(),dt.watchSystem&&Ct(),dt.watchConsole&&Ot(),dt.watchHttp&&Bt();var e=dt.needSleep,n=dt.wait;e?setTimeout((function(){xt(dt)}),n):xt(dt)},sendMsg:qt};!function(){var t=function(){function t(e){r(this,t),this.id=new Date,this.subs=[]}return i(t,[{key:"defined",value:function(){t.watch.add(this)}},{key:"notify",value:function(){this.subs.forEach((function(t,e){if("function"==typeof t.update)try{t.update.apply(t)}catch(t){console.warr(t)}}))}}]),t}();t.watch=null;var e,n=function(){function t(e,n){r(this,t),this.name=e,this.id=new Date,this.callBack=n}return i(t,[{key:"add",value:function(t){t.subs.push(this)}},{key:"update",value:function(){(0,this.callBack)(this.name)}}]),t}(),o=(e=new t,function(r){if("historychange"===r)return function(r,o){var i=new n(r,o);t.watch=i,e.defined(),t.watch=null};if("pushState"===r||"replaceState"===r){console.log(history);var o=history[r];return function(){o.apply(history,arguments),e.notify()}}});window.addHistoryListener=o("historychange"),history.pushState=o("pushState"),history.replaceState=o("replaceState")}();var Ut="Mobile"==(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?"Mobile":"Desktop");window||E("it is must be brower environment"),Ut||E("it is must be mobile H5 environment");var Vt={gesture:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"z",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};"z"===e&&C(t=document.documentElement,n)},start:Ft.startdevTools,send:Ft.sendMsg};return window.h5tools=Vt,Vt}));
