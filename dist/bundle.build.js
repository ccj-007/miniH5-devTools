!function(n){"function"==typeof define&&define.amd?define(n):n()}((function(){"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},n(t)}function t(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function e(n,t){for(var e=0;e<t.length;e++){var o=t[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}function o(n,t,o){return t&&e(n.prototype,t),o&&e(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n}function r(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var e=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==e)return;var o,r,i=[],a=!0,c=!1;try{for(e=e.call(n);!(a=(o=e.next()).done)&&(i.push(o.value),!t||i.length!==t);a=!0);}catch(n){c=!0,r=n}finally{try{a||null==e.return||e.return()}finally{if(c)throw r}}return i}(n,t)||i(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(n,t){if(n){if("string"==typeof n)return a(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);return"Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e?Array.from(n):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?a(n,t):void 0}}function a(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,o=new Array(t);e<t;e++)o[e]=n[e];return o}function c(n,t){var e="undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(!e){if(Array.isArray(n)||(e=i(n))||t&&n&&"number"==typeof n.length){e&&(n=e);var o=0,r=function(){};return{s:r,n:function(){return o>=n.length?{done:!0}:{done:!1,value:n[o++]}},e:function(n){throw n},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,s=!1;return{s:function(){e=e.call(n)},n:function(){var n=e.next();return c=n.done,n},e:function(n){s=!0,a=n},f:function(){try{c||null==e.return||e.return()}finally{if(s)throw a}}}}function s(n,t){void 0===t&&(t={});var e=t.insertAt;if(n&&"undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===e&&o.firstChild?o.insertBefore(r,o.firstChild):o.appendChild(r),r.styleSheet?r.styleSheet.cssText=n:r.appendChild(document.createTextNode(n))}}s(".jello-horizontal {\n  -webkit-animation: jello-horizontal .9s both;\n  animation: jello-horizontal .9s both\n}\n\n@-webkit-keyframes jello-horizontal {\n  0% {\n    -webkit-transform: scale3d(1, 1, 1);\n    transform: scale3d(1, 1, 1)\n  }\n\n  30% {\n    -webkit-transform: scale3d(1.25, .75, 1);\n    transform: scale3d(1.25, .75, 1)\n  }\n\n  40% {\n    -webkit-transform: scale3d(.75, 1.25, 1);\n    transform: scale3d(.75, 1.25, 1)\n  }\n\n  50% {\n    -webkit-transform: scale3d(1.15, .85, 1);\n    transform: scale3d(1.15, .85, 1)\n  }\n\n  65% {\n    -webkit-transform: scale3d(.95, 1.05, 1);\n    transform: scale3d(.95, 1.05, 1)\n  }\n\n  75% {\n    -webkit-transform: scale3d(1.05, .95, 1);\n    transform: scale3d(1.05, .95, 1)\n  }\n\n  100% {\n    -webkit-transform: scale3d(1, 1, 1);\n    transform: scale3d(1, 1, 1)\n  }\n}\n\n@keyframes jello-horizontal {\n  0% {\n    -webkit-transform: scale3d(1, 1, 1);\n    transform: scale3d(1, 1, 1)\n  }\n\n  30% {\n    -webkit-transform: scale3d(1.25, .75, 1);\n    transform: scale3d(1.25, .75, 1)\n  }\n\n  40% {\n    -webkit-transform: scale3d(.75, 1.25, 1);\n    transform: scale3d(.75, 1.25, 1)\n  }\n\n  50% {\n    -webkit-transform: scale3d(1.15, .85, 1);\n    transform: scale3d(1.15, .85, 1)\n  }\n\n  65% {\n    -webkit-transform: scale3d(.95, 1.05, 1);\n    transform: scale3d(.95, 1.05, 1)\n  }\n\n  75% {\n    -webkit-transform: scale3d(1.05, .95, 1);\n    transform: scale3d(1.05, .95, 1)\n  }\n\n  100% {\n    -webkit-transform: scale3d(1, 1, 1);\n    transform: scale3d(1, 1, 1)\n  }\n}\n\n.slide-in-blurred-top {\n  animation: slide-in-blurred-top .6s cubic-bezier(.23, 1.000, .32, 1.000) both\n}\n\n@keyframes slide-in-blurred-top {\n  0% {\n    transform: translateY(-1000px) scaleY(2.5) scaleX(.2);\n    transform-origin: 50% 0;\n    filter: blur(40px);\n    opacity: 0\n  }\n\n  100% {\n    transform: translateY(0) scaleY(1) scaleX(1);\n    transform-origin: 50% 50%;\n    filter: blur(0);\n    opacity: 1\n  }\n}");s(":root {\n  --primary-deep: #0987ee; \n  --primary-light: #40a9ff; \n}\n\n#envBox {\n  position: fixed;\n  z-index: 999999999999;\n  top: 50%;\n  right: 0;\n  width: 10px;\n  height: 60px;\n  background: var(--primary-light);\n  transition: top .5s linear;\n  border-radius: 5px 0 0 5px;\n}\n\n#envBox-expand {\n  position: fixed;\n  z-index: 9999999999999;\n  height: 60px;\n  width: 100vw;\n  top: 50%;\n  right: 0;\n  background: var(--primary-light);\n  transition: width .5s linear;\n}\n\n#envBox-expand button {\n  width: 20%;\n  height: 30px;\n  z-index: 1;\n  color: white;\n  background: var(--primary-deep);\n  outline: none;\n  border: none;\n  padding: 0.5em auto;\n  box-sizing: border-box;\n}\n\n#envBox-expand span {\n  color: #ffffff;\n  font-size: 14px;\n}\n\n");s("/* dialog componetnts */\n:root {\n  --main-deep: #0987ee; \n  --main-light: #40a9ff; \n\n  --common-info: #0987ee; \n  --common-warn: #ffa20d; \n  --common-error: #ff2a2a; \n  --common-success: #00d41c; \n}\n\n#envBox-dialog {\n  position: fixed;\n  font-size: 14px;\n  top: 40%;\n  z-index: 99;\n  background: var(--main-light);\n  padding: 20px;\n  border-radius: 5px;\n  color: #fff;\n  box-shadow: 0px 10px 20px 0px rgba(0, 0, 0, 0.1)\n}\n\n#envBox-dialog button {\n  z-index: 1;\n  color: white;\n  background: var(--main-deep);\n  outline: none;\n  border: none;\n  padding: 5px 10px;\n  box-sizing: border-box;\n}\n\n.dialog-detail {\n  width: 100%;\n  line-height: 32px;\n  font-size: 14px;\n}\n\n.env-close {\n  position: absolute;\n  top: 0px;\n  right: 0px;\n  width: 20px;\n  height: 20px;\n  background: #fff;\n  border-radius: 0 0 0 50%;\n}\n\n\n/* toast componetnts */\n#envBox-toast {\n  position: fixed;\n  top: 2%;\n  z-index: 99;\n  padding: 15px;\n  border-radius: 30px;\n  font-size: 14px;\n  color: #fff;\n  box-shadow: 0px 10px 20px 0px rgba(0, 0, 0, 0.1)\n}\n\n.envBox-toast-info {\n  background: var(--common-info);\n}\n\n.envBox-toast-error {\n  background: var(--common-error);\n}\n\n.envBox-toast-warn {\n  background: var(--common-warn);\n}\n\n\n.console-log {\n  color: #000;\n  background: #fff;\n}\n\n.console-warn {\n  color: rgb(255, 255, 255);\n  background: var(--common-warn);\n}\n\n.console-error {\n  color: rgb(255, 255, 255);\n  background: var(--common-error);\n}\n\n.console-info {\n  color: rgb(255, 255, 255);\n  background: var(--main-deep);\n}\n\n.http {\n  border-radius: 5px;\n  cursor: pointer;\n  line-height: 30px;\n}\n\n.http-start {\n  color: #fff;\n  background: var(--common-info);\n}\n\n.http-suc {\n  color: #fff;\n  background: var(--common-success);\n}\n\n.http-err {\n  color: #fff;\n  background: var(--common-error);\n}\n\n");s("html,\nbody {\n  padding: 0;\n  margin: 0;\n  display: flex;\n  justify-content: center;\n}");var l={info:"envBox-toast-info",error:"envBox-toast-error",warn:"envBox-toast-warn"},d=function(n,t,e){var o=document.createElement("div");o.id="envBox-toast",o.className="slide-in-blurred-top ".concat(l[e]),o.innerText=n,document.body.appendChild(o),setTimeout((function(){document.body.removeChild(o)}),t)},u=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3;d(n,t,"info")},f=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3;d(n,t,"error")},p=o((function n(e,o){t(this,n);var r=new Map;e.addEventListener("touchstart",(function(n){var t,e=c(n.changedTouches);try{for(e.s();!(t=e.n()).done;){var i=t.value,a=Object.create(null);r.set(i.identifier,a),o.start(i,a)}}catch(n){e.e(n)}finally{e.f()}})),e.addEventListener("touchmove",(function(n){var t,e=c(n.changedTouches);try{for(e.s();!(t=e.n()).done;){var i=t.value,a=r.get(i.identifier);o.move(i,a)}}catch(n){e.e(n)}finally{e.f()}})),e.addEventListener("touchend",(function(n){var t,e=c(n.changedTouches);try{for(e.s();!(t=e.n()).done;){var i=t.value,a=r.get(i.identifier);o.end(i,a),r.delete(i.identifier)}}catch(n){e.e(n)}finally{e.f()}})),e.addEventListener("cancel",(function(n){var t,e=c(n.changedTouches);try{for(e.s();!(t=e.n()).done;){var i=t.value,a=r.get(i.identifier);o.cancel(i,a),r.delete(i.identifier)}}catch(n){e.e(n)}finally{e.f()}}))})),h=function(){function n(e){t(this,n),this.dispatcher=e}return o(n,[{key:"start",value:function(n,t){var e=this;t.startX=n.clientX,t.startY=n.clientY,t.isPan=!1,t.isTap=!0,t.isPress=!1,t.handler=setTimeout((function(){t.isPan=!1,t.isTap=!1,t.isPress=!0,e.dispatcher.dispatch("press",{clientX:n.clientX,clientY:n.clientY}),t.handler=null}),500)}},{key:"move",value:function(n,t){var e=n.clientX-t.startX,o=n.clientY-t.startY,r=Math.pow(e,2)+Math.pow(o,2);!t.isPan&&r>100&&(t.isPan=!0,t.isTap=!1,t.isPress=!1,t.isVertical=Math.abs(e)<Math.abs(o),this.dispatcher.dispatch("panstart",{startX:t.startX,startY:t.startY,clientX:n.clientX,clientY:n.clientY,dx:e,dy:o,isVertical:t.isVertical}),clearTimeout(t.handler)),t.isPan&&this.dispatcher.dispatch("pan",{startX:t.startX,startY:t.startY,clientX:n.clientX,clientY:n.clientY,dx:e,dy:o,isVertical:t.isVertical}),t.points?t.points=t.points.filter((function(n){return Date.now()-n.t<500})):t.points=[],t.points.push({t:Date.now(),x:n.clientX,y:n.clientY})}},{key:"end",value:function(n,t){(t.isFlick=!1,t.isTap&&(this.dispatcher.dispatch("tap",{}),clearTimeout(t.handler)),t.isPan)&&(t.points=t.points.filter((function(n){return Date.now()-n.t<500})),(t.points.length?Math.sqrt(Math.pow(n.clientX-t.points[0].x,2)+Math.pow(n.clientY-t.points[0].y,2))/(Date.now()-t.points[0].t):0)>1.5?(t.isFlick=!0,this.dispatcher.dispatch("flick",{})):(t.isFlick=!1,this.dispatcher.dispatch("panend",{clientX:n.clientX,clientY:n.clientY})));t.isPress&&this.dispatcher.dispatch("panend",{startX:t.startX,startY:t.startY,clientX:n.clientX,clientY:n.clientY,isVertical:t.isVertical,isFlick:t.isFlick})}},{key:"cancel",value:function(n,t){clearTimeout(t.handler)}}]),n}(),v=function(){function n(e){t(this,n),this.element=e}return o(n,[{key:"dispatch",value:function(n,t){var e=new Event(n);for(var o in t)e[o]=t[o];this.element.dispatchEvent(e)}}]),n}();function m(n){new p(n=document.documentElement,new h(new v(n)))}function g(n,t){m(n),t?yn.startdevTools(t):yn.startdevTools();var e=document.getElementById("envBox");e.style.display="none";var o=0,r=0,i=0,a=0,c=!1,s=0,l=!1,d=!1,f=!1,p=null;t.endTime&&setTimeout((function(){p&&(clearInterval(p),p=null)}),t.endTime),document&&document.documentElement&&document.documentElement.addEventListener("pan",(function(n){o=n.dx,r=n.dy,i=n.startX,a=n.clientX,p||(p=setInterval((function(){o>200&&!c&&(c=!0,s=r),c&&!l&&Math.abs(a-i)<20&&r-s>100&&(l=!0,d=o),c&&l&&!f&&o-d>100&&(u("success unlock"),f=!0,e.style.display="block",clearInterval(p),p=null)}),50))}))}var b=function(n){try{return JSON.parse(localStorage.getItem(n))}catch(n){console.log(n)}},y=function(n,t){localStorage.setItem(n,JSON.stringify(t))},x=function(n){return Object.prototype.toString.call(n).slice(8,-1).toLowerCase()},w='<svg class=\'env-close\' role="img" xmlns="http://www.w3.org/2000/svg" width="48px" height="48px" viewBox="0 0 24 24" aria-labelledby="closeIconTitle" stroke="#0987ee" stroke-width="2" stroke-linecap="round" stroke-linejoin="miter" fill="none" color="#0987ee"> <title id="closeIconTitle">Close</title> <path d="M6.34314575 6.34314575L17.6568542 17.6568542M6.34314575 17.6568542L17.6568542 6.34314575"/> </svg>';const E=n=>{y("global_forbid",!0);let t=document.querySelector("#envBox-dialog");t||(t=document.createElement("div"),t.id="envBox-dialog",t.className="jello-horizontal",document.body.appendChild(t)),t.style.display="block",t.innerHTML&&(t.innerHTML=""),t.innerHTML=n,t.innerHTML+=w,document.querySelector(".env-close").addEventListener("click",(()=>{L()}),!1)},L=()=>{let n=document.querySelector("#envBox-dialog");console.log(n),n.innerHTML="",n.style.display="none",y("global_forbid",!1)},k=n=>{let t=document.querySelector("#envBox-dialog");t&&(t.innerHTML&&(t.innerHTML=""),t.innerHTML+=n,t.innerHTML+=w,document.querySelector(".env-close").addEventListener("click",(()=>{L()}),!1))};var T=["load","loadend","timeout","error","readystatechange","abort"];function S(n,t){var e={};for(var o in n)e[o]=n[o];return e.target=e.currentTarget=t,e}var C=T[0],M=T[1],O=T[2],I=T[3],j=T[4],B=T[5];function X(n,t){if((t=t||window).__xhr)throw"Ajax is already hooked.";return function(n,t){var e=n.onRequest,o=n.onResponse,r=n.onError;function i(n,t){var e=new z(n),r={response:t.response||t.responseText,status:t.status,statusText:t.statusText,config:n.config,headers:n.resHeader||n.getAllResponseHeaders().split("\r\n").reduce((function(n,t){if(""===t)return n;var e=t.split(":");return n[e.shift()]=function(n){return n.replace(/^\s+|\s+$/g,"")}(e.join(":")),n}),{})};if(!o)return e.resolve(r);o(r,e)}function a(n,t,e,o){var i=new N(n);e={config:n.config,error:e,type:o},r?r(e,i):i.next(e)}function c(){return!0}function s(n){return function(t,e){return a(t,this,e,n),!0}}function l(n,t){return 4===n.readyState&&0!==n.status?i(n,t):4!==n.readyState&&Y(n,j),!0}return function(n,t){function e(t){return function(){var e=this.hasOwnProperty(t+"_")?this[t+"_"]:this.xhr[t],o=(n[t]||{}).getter;return o&&o(e,this)||e}}function o(t){return function(e){var o=this.xhr,r=this,i=n[t];if("on"===t.substring(0,2))r[t+"_"]=e,o[t]=function(i){i=S(i,r),n[t]&&n[t].call(r,o,i)||e.call(r,i)};else{var a=(i||{}).setter;e=a&&a(e,r)||e,this[t+"_"]=e;try{o[t]=e}catch(n){}}}}function r(t){return function(){var e=[].slice.call(arguments);if(n[t]){var o=n[t].call(this,e,this.xhr);if(o)return o}return this.xhr[t].apply(this.xhr,e)}}return(t=t||window).__xhr=t.__xhr||t.XMLHttpRequest,t.XMLHttpRequest=function(){for(var n=new t.__xhr,i=0;i<T.length;++i){var a="on"+T[i];void 0===n[a]&&(n[a]=null)}for(var c in n){var s="";try{s=typeof n[c]}catch(n){}"function"===s?this[c]=r(c):Object.defineProperty(this,c,{get:e(c),set:o(c),enumerable:!0})}var l=this;n.getProxy=function(){return l},this.xhr=n},Object.assign(t.XMLHttpRequest,{UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4}),t.__xhr}({onload:c,onloadend:c,onerror:s(I),ontimeout:s(O),onabort:s(B),onreadystatechange:function(n){return l(n,this)},open:function(n,t){var o=this,r=t.config={headers:{}};r.method=n[0],r.url=n[1],r.async=n[2],r.user=n[3],r.password=n[4],r.xhr=t;var i="on"+j;if(t[i]||(t[i]=function(){return l(t,o)}),e)return!0},send:function(n,t){var o=t.config;if(o.withCredentials=t.withCredentials,o.body=n[0],e){var r=function(){e(o,new A(t))};return!1===o.async?r():setTimeout(r),!0}},setRequestHeader:function(n,t){if(t.config.headers[n[0].toLowerCase()]=n[1],e)return!0},addEventListener:function(n,t){var e=this;if(-1!==T.indexOf(n[0])){var o=n[1];return H(t).addEventListener(n[0],(function(t){var r=S(t,e);r.type=n[0],r.isTrusted=!0,o.call(e,r)})),!0}},getAllResponseHeaders:function(n,t){var e=t.resHeader;if(e){var o="";for(var r in e)o+=r+": "+e[r]+"\r\n";return o}},getResponseHeader:function(n,t){var e=t.resHeader;if(e)return e[(n[0]||"").toLowerCase()]}},t)}(n,t)}function H(n){return n.watcher||(n.watcher=document.createElement("a"))}function Y(n,t){var e,o=n.getProxy(),r="on"+t+"_",i=S({type:t},o);o[r]&&o[r](i),"function"==typeof Event?e=new Event(t,{bubbles:!1}):(e=document.createEvent("Event")).initEvent(t,!1,!0),H(n).dispatchEvent(e)}function P(n){this.xhr=n,this.xhrProxy=n.getProxy()}function _(n){function t(n){P.call(this,n)}return t.prototype=Object.create(P.prototype),t.prototype.next=n,t}P.prototype=Object.create({resolve:function(n){var t=this.xhrProxy,e=this.xhr;t.readyState=4,e.resHeader=n.headers,t.response=t.responseText=n.response,t.statusText=n.statusText,t.status=n.status,Y(e,j),Y(e,C),Y(e,M)},reject:function(n){this.xhrProxy.status=0,Y(this.xhr,n.type),Y(this.xhr,M)}});var A=_((function(n){var t=this.xhr;for(var e in n=n||t.config,t.withCredentials=n.withCredentials,t.open(n.method,n.url,!1!==n.async,n.user,n.password),n.headers)t.setRequestHeader(e,n.headers[e]);t.send(n.body)})),z=_((function(n){this.resolve(n)})),N=_((function(n){this.reject(n)}));var R=!1,D={insertDOM:document.querySelector("#app"),wait:1e3,needSleep:!1,envBoxIdName:"envBox",envBoxExpandIdName:"envBox-expand",envList:["test","dev","prebrand"],watchEnv:!0,watchPerformance:!0,watchError:!0,watchRoutes:!0,watchActions:!0,watchStorage:!0,watchSystem:!0,watchConsole:!0,watchHttp:!0,isNewStorage:!0,watchActionDOMList:[{eventType:"click",domId:".test1",eventId:"001"}],sendOptions:{commonInfo:{pid:"",mid:"",uid:"",did:""},method:"gif",baseURL:"http://localhost:8000"},version:"1.0.0",maxLimit:5,asyncTime:5e3,endTime:1e4},q={errorCount:0,errorSum:"",errorList:[]},V={routeInfo:{url:"",referer:"",title:"",action:"",sendTime:"",triggerTime:""},routesList:[]},J={newStorageList:[],maxLen:5},F={},U={consoleList:[],info:[],error:[],log:[],warn:[]},W={httpList:[],urlList:[]},$=function(){y("global_forbid",!1)},G=function(n){var t=n.envBoxIdName,e=n.envBoxExpandIdName,o=n.insertDOM,r=n.watchHttp,i=n.watchSystem,a=n.watchEnv,c=n.watchPerformance,s=n.watchError,l=n.watchRoutes,d=n.watchStorage,u=n.watchConsole,f=document.createElement("div");f.id=t,o.appendChild(f),K(f),f.addEventListener("click",(function(n){!0!==b("global_forbid")&&(R=!0,f.id=e,a&&sn(f),c&&ln(f),s&&dn(f),l&&un(f),d&&fn(f),i&&pn(f),u&&hn(f),r&&vn(f),mn(f),gn(f),document.querySelectorAll("#envBox-expand button").forEach((function(n){n.ontouchstart=function(){n.style.background="#40a9ff"},n.ontouchend=function(){n.style.background="#0987ee"}})))}),!1),document.addEventListener("click",(function(n){n.target.id!==f.id&&R&&(f.id=t,f.innerHTML="",R=!1)}),!1)},K=function(n){m();var t=n.offsetWidth,e=n.offsetHeight,o=n.offsetLeft,r=n.offsetTop,i=!1;document.documentElement.addEventListener("panstart",(function(n){n.preventDefault(),i=o-10<n.clientX&&n.clientX<o+t+10&&r-10<n.clientY&&n.clientY<r+e+10})),document.documentElement.addEventListener("panend",(function(t){t.preventDefault(),i&&(n.style.top=t.clientY+"px",r=t.clientY)}))},Q=function(n){for(var t in n){null==n[t]&&f("options exist null or undefined----"+t)}},Z=function(){window.addEventListener("error",(function(n){cn("global error"+n.message),k("<div>".concat(q.errorSum,"</div>"))}),!1),window.addEventListener("unhandledrejection",(function(n){cn("promise error"+n.reason),k("<div>".concat(q.errorSum,"</div>"))}),!1)},nn=function(){D.watchActionDOMList.forEach((function(n){var t=n.domId&&document.querySelectorAll(n.domId);t&&t.forEach((function(t){t.addEventListener(n.eventType,(function(){bn({type:n.eventType,DOM:n.domId},"action")}))}))}))},tn=function(){V.routeInfo.url=window.location.href,V.routeInfo.title=document.title,window.addEventListener("popstate",(function(n){console.log("routes change",n)}))},en=function(){var n=localStorage.setItem;localStorage.setItem=function(t,e){e=JSON.parse(e);var o=new Event("setItem",{key:e});o.key=t,o.val=e;var r=J.newStorageList.findIndex((function(n){return n[0]===t}));r>-1?(J.newStorageList.splice(r,1),J.newStorageList.unshift([t,e])):J.newStorageList.push([t,e]),window.dispatchEvent(o),n.apply(this,arguments)}},on=function(){function n(){F=plus.device}window.plus?n():document.addEventListener("plusready",n,!1)},rn=function(){["info","error","log","warn"].forEach((function(n){!function(n){var t=console[n];console[n]=function(){U.consoleList.push({data:arguments[0],type:n}),t.call.apply(t,[console].concat(Array.prototype.slice.call(arguments)))}}(n)}))},an=function(){X({onRequest:function(n,t){console.log("preWatchHttp----start",n),W.httpList.push(n),W.urlList.push({url:n.url,type:"send"}),t.next(n)},onError:function(n,t){console.log("preWatch----error",n),W.httpList.push(n),W.urlList.push({url:n.config.url,type:"err"}),t.next(n)},onResponse:function(n,t){console.log("preWatch----success",n),W.httpList.push(n),W.urlList.push({url:n.config.url,type:"suc"}),t.next(n)}})},cn=function(n){var t=q.errorList,e=D.asyncTime;if(n&&(t.push(n),q.errorCount+=1,"array"===x(t))){q.errorSum+="".concat(q.errorCount,": ")+n+"<br>";var o={errorSum:q.errorSum};if(q.errorCount>=D.maxLimit)bn(o,"err"),q.errorList=[];else{if(!q.errorList.length)return;setTimeout((function(){q.errorCount<D.maxLimit&&(bn(o,"err"),q.errorList=[])}),e)}}},sn=function(n){var t=D.envList,e=document.createElement("button");e.innerText=b("global_env")||"env",e.className="envBtn",n.appendChild(e),e.addEventListener("click",(function(){var n="<div class='dialog-detail'>当前环境: ".concat(b("global_env")||"env","</div>");t.forEach((function(t){n+="<button class='env-btn'>".concat(t,"</button>")})),E(n),document.querySelectorAll(".env-btn").forEach((function(n){n.addEventListener("click",(function(t){R=!1;var o=t.target.textContent;y("global_env",o),n.innerText=o,e.innerText=b("global_env")||"env",y("global_url","https://".concat(o,".zzss.com")),u("已成功修改"+o+"环境")}),!1)}))}),!1)},ln=function(n){var t=document.createElement("button");n.appendChild(t),t.innerText="performance";var e,o,r=window.performance.timing,i=r.domLoading,a=r.navigationStart;e=r.domContentLoadedEventEnd-a,o=r.loadEventEnd-a;var c="<div>首屏开始渲染时间:".concat(i-a,"ms</div><br><div>DOM加载完毕时间:").concat(e,"ms</div><br><div>所有资源及DOM加载完毕时间:").concat(o,"ms</div>");t.onclick=function(){E(c)}},dn=function(n){var t=q.errorSum,e=document.createElement("button");n.appendChild(e),e.innerText="error",e.onclick=function(){t?E("<div>".concat(t,"</div>")):u("no error")}},un=function(n){var t=V.routeInfo,e=document.createElement("button");n.appendChild(e),e.innerText="route",e.onclick=function(){for(var n="",e=0,o=Object.entries(t);e<o.length;e++){var i=r(o[e],2),a=i[0],c=i[1];n+="<div>".concat(a+"-----"+c,"</div><br>")}E(n)}},fn=function(n){var t=D.isNewStorage,e=J.maxLen,o=document.createElement("button");n.appendChild(o),o.innerText="storage",o.onclick=function(){var n,o="",r=null===(n=J.newStorageList)||void 0===n?void 0:n.length;t&&e<r&&J.newStorageList.splice(e,r),J.newStorageList.length?(J.newStorageList.forEach((function(n){var t=n[0],e=JSON.parse(n[1]),r=x(e),i="<div>key: ".concat(t," val: ").concat(e," type: ").concat(r," <br></div>");o+=i})),E(o)):u("no storage")}},pn=function(n){var t=document.createElement("button");n.appendChild(t),t.innerText="system",t.onclick=function(){"{}"!==JSON.stringify(F)?E("<div>".concat(JSON.stringify(F),"</div>")):u("请在真机webview调试")}},hn=function(t){var e=document.createElement("button");t.appendChild(e),e.innerText="console",e.onclick=function(){var t="";U.consoleList.length?(U.consoleList.forEach((function(e){var o=e.data,r=e.type;"object"===n(o)?t+="<div class='console-".concat(r,"'>").concat(JSON.stringify(o),"</div>"):t+="<div class='console-".concat(r,"'>").concat(o,"</div>")})),E("<div>".concat(t,"</div>"))):u("no log")}},vn=function(n){var t=document.createElement("button");n.appendChild(t),t.innerText="http",t.onclick=function(){var n="";W.urlList.forEach((function(t,e){n+="<div class='http http-".concat(t.type,"'>").concat(t.url,"</div>")})),E(n)}},mn=function(n){var t=document.createElement("button");n.appendChild(t),t.innerText="version",t.onclick=function(){u("当前版本".concat(D.version))}},gn=function(n){var t=document.createElement("button");n.appendChild(t),t.innerText="custom",t.onclick=function(){u("未开放.....")}},bn=function(n,t,e){"object"===x(n)||t||f("do not input object or type");var o=D.sendOptions,i=o.baseURL,a=o.commonInfo,c=o.method,s=Object.assign({},n,a),l=Object.entries(s).map((function(n){var t=r(n,2),e=t[0],o=t[1];return"".concat(e,"=").concat(o)})).join("&");"gif"!==e&&"gif"!==c||((new Image).src="".concat(i,"?")+encodeURIComponent(l));"beacon"!==e&&"beacon"!==c||navigator.sendBeacon(i,s)},yn={startdevTools:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D;$(),Object.assign(D,n),Q(D),D.watchError&&Z(),D.watchActions&&nn(),D.watchRoutes&&tn(),D.watchStorage&&en(),D.watchSystem&&on(),D.watchConsole&&rn(),D.watchHttp&&an();var t=D.needSleep,e=D.wait;t?setTimeout((function(){G(D)}),e):G(D)},sendMsg:bn},xn="Mobile"==(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?"Mobile":"Desktop");if(!window)throw f("it is must be brower environment"),new Error("it is must be brower environment");if(!xn)throw f("it is must be mobile H5 environment"),new Error("it is must be mobile H5 environment");Object.prototype.h5tools={gesture:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"z",e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};"z"===t&&g(n=document.documentElement,e)},start:yn.startdevTools,send:yn.sendMsg}}));
